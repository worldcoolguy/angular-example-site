[
    {
        "title": "Average Performance Curve with Data Distribution",
        "ploturl":"https://res.cloudinary.com/harip/image/upload/v1520885776/site/python/avgcurvewithdataanddistribution.png",
        "code":"\"\"\"Average performance curve with data distribution\"\"\"\n\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport matplotlib.transforms as mtransforms\nimport pandas as pd\n\ndef get_distribution_box(xpos, parentbox, parentbox_xlim):\n    \"\"\"Function that returns the box where the histogram is placed\"\"\"\n\n    xaxis_tick_width = (parentbox.x1-parentbox.x0)/parentbox_xlim\n    hist_chart_x0 = (xpos*xaxis_tick_width)+parentbox.x0\n    hist_chart_width = parentbox.x1+(xaxis_tick_width*xpos)\n    return mtransforms.Bbox([[hist_chart_x0, parentbox.y0], [hist_chart_width, parentbox.y1]])\n\ndef get_distribution_chart(box, parent_yaxis, y_values, x_values, parent_xlim):\n    \"\"\"Function that returns histogram\"\"\"\n\n    hist_chart = parent_yaxis.twiny()\n    hist_chart.axis('off')\n    hist_chart.set_xlim([0, parent_xlim])\n    hist_chart.set_position(box)\n    hist_chart.barh(y_values, x_values, align='center', color='lightgray', zorder=1)\n    return hist_chart\n\nPERF_DATA = pd.read_csv('timeseries.csv')\nGROUP = 3\nPERF_GROUP_DATA = PERF_DATA[PERF_DATA['Group'] == GROUP]\nCOL_NAMES = [colname for colname in PERF_GROUP_DATA.columns.values if \"Age_\" in colname]\nGROUP_AVG_VALUES = pd.Series([PERF_GROUP_DATA[colname].mean() for colname in COL_NAMES])\nXLIM = 27\nYLIM = 100\n\nFIG, AX = plt.subplots(nrows=1, ncols=1)\nPARENT_BOX = AX.get_position()\n\nfor idx, col_name in enumerate(COL_NAMES):\n    age_data = PERF_GROUP_DATA[[col_name]].ix[:, 0].value_counts(sort=False).sort_index()\n    age_data = age_data/age_data.max()\n    y_pos = np.array([k for k, v in age_data.iteritems()])\n    perf = np.array([v for k, v in age_data.iteritems()])\n    distribution_box = get_distribution_box(idx, PARENT_BOX, XLIM)\n    disChart = get_distribution_chart(distribution_box, AX, y_pos, perf, XLIM)\n\nAVG = AX.twiny()\nAVG.plot(GROUP_AVG_VALUES, color='black', zorder=2)\nAX.set_ylim([0, YLIM])\nAX.set_xlim([0, XLIM])\nplt.show()\n"
    },
     
    {
        "title": "Average Performance Curve with Data",
        "ploturl":"https://res.cloudinary.com/harip/image/upload/v1521062339/avgcurvewithdata.png",
        "code":"\"\"\"Average performance curve for each group\"\"\"\n\nimport pandas as pd\nimport matplotlib.pyplot as plt\n\nPERF_DATA = pd.read_csv('timeseries.csv')\nGROUP = 3\nPERF_GROUP_DATA = PERF_DATA[PERF_DATA['Group'] == GROUP]\n\n# Read column names and ignore Group column\nCOL_NAMES = [colname for colname in PERF_GROUP_DATA.columns.values if \"Age_\" in colname]\n\n# Plot entire data set\nGROUP_VALUES = PERF_GROUP_DATA.drop(columns=['Group']).T\n\n# Get average for the group\nGROUP_AVG_VALUES = pd.Series([PERF_GROUP_DATA[colname].mean() for colname in COL_NAMES])\n\nplt.plot(range(len(COL_NAMES)), GROUP_VALUES, color='lightgray', linewidth=0.5)\nplt.plot(GROUP_AVG_VALUES, color='black')\nplt.show()\n"
    },
 
    {
        "title": "Average Performance Curve by Group",
        "ploturl":"https://res.cloudinary.com/harip/image/upload/v1521062281/avgcurvebygroup.png",
        "code":"\"\"\"Average performance curve for each group\"\"\"\n\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\n\nPERF_DATA = pd.read_csv('timeseries.csv')\n\n# Get distinct groups\nGROUPS = PERF_DATA['Group'].unique()\nGROUPS = sorted(GROUPS[~np.isnan(GROUPS)])\n\n# Read column names and ignore Group column\nCOL_NAMES = [colname for colname in PERF_DATA.columns.values if \"Age_\" in colname]\n\nPERF_AVGDATA_GROUPS = pd.DataFrame()\nfor group in GROUPS:\n    group_values = PERF_DATA[PERF_DATA['Group'] == group]\n    group_name = f'Group {int(group)}'\n    group_means = [group_values[colname].mean() for colname in COL_NAMES]\n    group_avg_values = pd.Series(group_means, name=group_name)\n    PERF_AVGDATA_GROUPS = PERF_AVGDATA_GROUPS.append(group_avg_values)\n\nPERF_AVGDATA_GROUPS.T.plot()\nplt.show()\n"
    },

    {
        "title": "Average Performance Curve",
        "ploturl":"https://res.cloudinary.com/harip/image/upload/v1521062358/avgcurve.png",
        "code":"\"\"\"Average performance curve\"\"\"\n\nimport pandas as pd\nimport matplotlib.pyplot as plt\n\nPERF_DATA = pd.read_csv('timeseries.csv')\n\n# Read column names\nCOL_NAMES = list(PERF_DATA.columns.values)\n\n# get average values for each column as a series\nAVG_VALUES = pd.Series([PERF_DATA[col_name].mean() for col_name in COL_NAMES])\n\n# plot series\nAVG_VALUES.plot(kind='line', grid=True, ylim={0, 100})\nplt.show()\n"
    }
]